üìó NORMA 0.2 ‚Äî QUALIDADE E ENGENHARIA
Projeto SaaS KAIROS ‚Äî Vers√£o 1.0 (FECHADA)
________________________________________
0. OBJETIVO E ESCOPO
1.	Esta norma define padr√µes obrigat√≥rios de qualidade e engenharia para:
1.1. manutenibilidade
1.2. previsibilidade
1.3. redu√ß√£o de regress√µes
1.4. padroniza√ß√£o de entregas
1.5. proibi√ß√£o de gambiarras
2.	Aplica-se a:
2.1. estilo e composi√ß√£o de c√≥digo
2.2. limites de tamanho/complexidade (alertas e gates)
2.3. padr√µes de erros e retornos
2.4. testes (unit/integration/e2e) e pipeline
2.5. code review e exce√ß√µes
________________________________________
1. PRINC√çPIOS FUNDAMENTAIS (OBRIGAT√ìRIOS)
3.	Princ√≠pios obrigat√≥rios:
3.1. KISS
3.2. DRY (principalmente para l√≥gica de dom√≠nio)
3.3. YAGNI (principalmente para arquitetura e abstra√ß√µes)
3.4. Fail-fast
3.5. Observabilidade (erros investig√°veis)
4.	Aplica√ß√£o por camada:
4.1. domain/: puro, determin√≠stico, altamente test√°vel
4.2. application/: use-cases, valida√ß√£o de entrada, orquestra√ß√£o
4.3. infra/: IO e integra√ß√µes
4.4. ui/: valida√ß√£o apenas de UX, estados previs√≠veis
________________________________________
2. PADR√ïES DE C√ìDIGO (OBRIGAT√ìRIOS)
5.	TypeScript estrito (strict: true) √© obrigat√≥rio.
6.	any √© proibido, exceto em boundary externo com convers√£o imediata e justificativa.
7.	Imutabilidade:
7.1. preferida no dom√≠nio
7.2. efeitos colaterais restritos a infra/ e boundaries controlados
8.	Nomenclatura:
8.1. Tipos/Interfaces: PascalCase
8.2. Fun√ß√µes: camelCase com verbo
8.3. Booleanos: is/has/can/should
8.4. Erros: sufixo Error
________________________________________
3. LIMITES DE TAMANHO E COMPLEXIDADE (ALERTAS E GATES)
3.1 Alertas (n√£o bloqueiam merge)
9.	Arquivo TS/TSX:
9.1. alerta ‚â• 250 linhas
10.	Fun√ß√£o:
10.1. alerta ‚â• 25 linhas
11.	Complexidade ciclom√°tica por fun√ß√£o:
11.1. alerta ‚â• 10
3.2 Gates (bloqueiam merge)
12.	Arquivo TS/TSX:
12.1. gate ‚â• 350 linhas
13.	Fun√ß√£o:
13.1. gate ‚â• 40 linhas
14.	Complexidade ciclom√°tica por fun√ß√£o:
14.1. gate ‚â• 15
3.3 Exce√ß√µes
15.	Exce√ß√£o a gate somente com:
15.1. tag [EXCEPTION]
15.2. justificativa t√©cnica
15.3. aprova√ß√£o do Chat de Governan√ßa
15.4. issue de refatora√ß√£o com prazo
________________________________________
4. TRATAMENTO DE ERROS E PADR√ÉO DE RETORNO
16.	Erros relevantes n√£o podem falhar silenciosamente.
17.	UI n√£o pode expor detalhes sens√≠veis.
4.1 Domain
18.	Erros de dom√≠nio devem ser tipados:
18.1. DomainError base
18.2. especializa√ß√µes (ValidationError, InvariantError)
4.2 Application (USE-CASES)
19.	Padr√£o obrigat√≥rio: Result
20.	Use-cases retornam:
20.1. { ok: true, data: ... } ou
20.2. { ok: false, error: { code, message, details? } }
21.	Exceptions s√£o reservadas para falhas inesperadas e s√£o tratadas no boundary.
4.3 UI
22.	UI deve tratar estados:
22.1. loading
22.2. empty
22.3. error
22.4. success
________________________________________
5. TESTES (ESTRAT√âGIA M√çNIMA)
23.	Pir√¢mide:
23.1. Unit (domain/application) como principal
23.2. Integration (infra) para repos/adapters cr√≠ticos
23.3. E2E apenas para fluxos cr√≠ticos m√≠nimos
24.	Cobertura percentual n√£o √© gate inicial; gate √©:
24.1. ‚Äúregra cr√≠tica sem teste‚Äù (definida por governan√ßa)
5.1 E2E (obrigat√≥rio antes de produ√ß√£o, mas enxuto)
25.	Antes de produ√ß√£o, deve existir E2E para fluxos cr√≠ticos m√≠nimos (3‚Äì5):
25.1. gerar/simular plano com perfil v√°lido
25.2. abrir meta di√°ria e concluir sess√£o
25.3. concluir dia (gatilho de revis√£o)
25.4. f√©rias/folgas bloqueando dia
25.5. informativos: c√°lculo de status (quando aplic√°vel)
________________________________________
6. AUTOMA√á√ÉO (PRE-COMMIT E CI)
6.1 Pre-commit obrigat√≥rio
26.	Rodar:
26.1. Prettier
26.2. ESLint
26.3. typecheck
26.4. unit tests r√°pidos
6.2 CI obrigat√≥rio
27.	Rodar:
27.1. lint
27.2. typecheck
27.3. unit tests
27.4. integration tests (quando aplic√°vel)
27.5. build
27.6. checagens de complexidade (quando configuradas)
________________________________________
7. CODE REVIEW (CHECKLIST)
28.	Toda PR deve validar:
28.1. ader√™ncia √† Norma 0.1
28.2. aus√™ncia de regra cr√≠tica na UI
28.3. tratamento de erros consistente (Result)
28.4. testes para regras cr√≠ticas
28.5. sem gambiarras / sem YAGNI
28.6. imports respeitando boundaries
28.7. logs sem dados sens√≠veis
________________________________________
8. DOCUMENTA√á√ÉO M√çNIMA
29.	Toda feature deve possuir documenta√ß√£o m√≠nima:
29.1. responsabilidade
29.2. public API
29.3. use-cases principais
29.4. invariantes do dom√≠nio
29.5. limita√ß√µes/riscos
________________________________________
9. EXCE√á√ïES (GOVERNAN√áA)
30.	Exce√ß√µes:
30.1. tag [EXCEPTION]
30.2. justificativa
30.3. aprova√ß√£o do Chat de Governan√ßa
30.4. issue de revis√£o com prazo
